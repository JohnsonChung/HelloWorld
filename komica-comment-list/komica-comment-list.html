<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="../bower_components/core-list/core-list.html">
<link rel="import" href="../bower_components/core-image/core-image.html">
<link rel="import" href="../komica-comment/komica-comment.html">
<!--
##### Example

    <x-helloworld></x-helloworld>

@element x-helloworld
@blurb Element providing solution to [...].
@status [...]
@homepage https://.../x-helloworld
-->

<polymer-element name="komica-comment-list" attributes="attr">
  <template>
    <link rel="stylesheet" href="komica-post-list.css">

    <core-list id="list" data="{{data}}" fit layout horizontal>
      <template>
        <komica-comment image="http://lorempixel.com/{{model.w}}/{{model.h}}/cats/{{model.SWATCHES}}">{{model.CONTENT | toUpperCase}}</komica-comment>
      </template>
    </core-list>
  </template>

  <script>

    // komica-post Contents
    var datas = [{
      	BOARDNAME: "綜合二",
      	POINT: 123456,
      	SWATCHES: 1,
        TITLE: "不會游泳怎麼辦?",
        NAME: "",
        CONTENT: "不會游泳，現在要進去海陸新訓了........<br>覺這一年當兵生活會很慘",
        imgNo: "01",
        REPLYCOUNT: "32"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 45623,
      	SWATCHES: 5,
        TITLE: "ㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZㄈㄓZ",
        NAME: "ㄈㄓZ",
        CONTENT: "李嫌和王女原本約在高鐵台南站見面，因鄰居發現王母失蹤",
        imgNo: "02",
        REPLYCOUNT: "2",
        CLASS: "highlight"
      },{
      	BOARDNAME: "新聞速報",
      	POINT: "78,645,456",
      	SWATCHES: 3,
        TITLE: "",
        NAME: "",
        CONTENT: "外來種賤女狗公惱羞開始血尿跳針哭哭ㄛwwwwww<br>護航乙",
        imgNo: "03",
        REPLYCOUNT: "8"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 456456,
      	SWATCHES: 4,
        TITLE: "",
        NAME: "",
        CONTENT: "搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李w好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李搞不好李嫌跟王女真的有交往過<br>因為某某原因而否認了<br>就跟以前認識某女明明就有暗示我告白<br>結果我沒告白就到處抹黒我說我有嚴重妄想症一樣",
        imgNo: "04",
        REPLYCOUNT: "21"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 353453,
      	SWATCHES: 7,
        TITLE: "",
        NAME: "",
        CONTENT: "無本文",
        imgNo: "15",
        REPLYCOUNT: "84"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 453,
      	SWATCHES: 8,
        TITLE: "",
        NAME: "",
        CONTENT: "為什麼支那賤畜一聽到台灣女生說話就射啦<br>我剛剛無聊上百度搜尋台灣女生，發現很多426很哈台灣的劍",
        imgNo: "16",
        REPLYCOUNT: "32"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 123456,
      	SWATCHES: 3,
        TITLE: "",
        NAME: "",
        CONTENT: "問一下 問答板為什麼只能設3個問題? 我看其他人都25題耶",
        imgNo: "17",
        REPLYCOUNT: "4"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 453453,
      	SWATCHES: 2,
        TITLE: "",
        NAME: "",
        CONTENT: "有島民學過速讀嗎?<br>我想要自學卻不知道要怎麼入門",
        imgNo: "18",
        REPLYCOUNT: "3"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 51245,
      	SWATCHES: 3,
        TITLE: "",
        NAME: "",
        CONTENT: "有島民知道拿熱水沖屁眼完5分鐘在拿冷水沖是什麼感覺嗎",
        imgNo: "",
        REPLYCOUNT: "0"
      },{
      	BOARDNAME: "綜合二",
      	POINT: 7857853435,
      	SWATCHES: 1,
        TITLE: "",
        NAME: "",
        CONTENT: "有什麼地方可以吹冷氣又有插座?",
        imgNo: "20",
        REPLYCOUNT: "2"
      }
    ];
    var sizeObject = [];
    var templateFunction = {
       randomSize: function(minW,maxW,minH,maxH) {
        minW = 100;
        maxW = 400;
        minH = 100;
        maxH = 400;
        var height = Math.floor(Math.random() * (maxH - minH) + minH);
        var width = Math.floor(Math.random() * (maxW - minW) + minW);
        return {w: width, h: height}
      },
      randomSizeObject: function (count) {
        sizeObject = [];
        for( var i = 0 ; i < count ; i++) {
          sizeObject.push( this.randomSize() );
        }
        return sizeObject
      },
      bindSize: function() {
        this.randomSizeObject(20);
        for (var i = 0; i < datas.length; i++){
          datas[i].w = sizeObject[i].w;
          datas[i].h = sizeObject[i].h;
        };
      }
    };
    templateFunction.bindSize();



    Polymer('komica-comment-list', {
      /**
       * The `noevent` event is not actually fired from here,
       * we document it as an example of documenting events.
       *
       * @event noevent
       */

      /**
       * The `attr` attribute does not yet have a purpose.
       *
       * @attribute attr
       * @type string
       */

      attr: '',
      ready: function() {
      },
      /**
       * This function will be invoked every time `attr` gets changed.
       */
      attrChanged: function() {
      },

      /**
       * The `task` method does [...]
       *
       * @method task
       * @return {Object} Returns [...].
       * @param {String} dummy Defines [...].
       */
      task: function(dummy) {
      },
      // Polymer Filter Method
      // ERROR 在core-list bender 的時候 filter 沒辦法正確執行 ex: value.toUpperCase(); return nothing
      // fileter 不知道為什麼回傳 10個 undefind 然後才回傳正確的 10 個 value
      TextToHTML: function(value) {
        var html = document.createElement('div');
        html.innerHTML = value;
        console.log(html);
        return value;
      },
      // Polymer Filter Method
      DOMparser: function(value) {
        var xmlString = value,
            parser = new DOMParser(),
            doc = parser.parseFromString(xmlString, "text/xml");
        return doc.firstChild // => <div id="foo">...
      },
      toUpperCase: function(value) {
        if(typeof value === 'string') {
          return value.toUpperCase();
        } else {
          return "";
        }
      },
      data: datas
    });

  </script>
</polymer-element>

